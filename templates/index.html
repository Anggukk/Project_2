<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í™˜ê²½ ëª¨ë‹ˆí„°ë§</title>
    <style>
      body {
        font-family: Arial;
        text-align: center;
      }
      .box {
        width: 300px;
        margin: auto;
        padding: 20px;
        border: 2px solid #333;
        border-radius: 10px;
      }
      .good {
        color: green;
      }
      .caution {
        color: blue;
      }
      .danger {
        color: red;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h2>ìŠ¤ë§ˆíŠ¸ ì‹¤ë‚´ í™˜ê²½ ëª¨ë‹ˆí„°ë§</h2>

    <div class="box">
      <p>ğŸŒ¡ ì˜¨ë„ : <span id="temp">-</span> â„ƒ</p>
      <p>ğŸ’§ ìŠµë„ : <span id="hum">-</span> %</p>
      <p>ğŸ’¡ ì¡°ë„ : <span id="light">-</span></p>
      <p>âš™ ëª¨ë“œ : <span id="mode">-</span></p>
      <p>ğŸš¦ ìƒíƒœ : <span id="level">-</span></p>
    </div>

    <script>
      async function fetchData() {
        const res = await fetch("/data");
        const data = await res.json();

        document.getElementById("temp").innerText = data.temperature;
        document.getElementById("hum").innerText = data.humidity;
        document.getElementById("light").innerText = data.light;
        document.getElementById("mode").innerText = data.mode;

        const levelElem = document.getElementById("level");
        levelElem.innerText = data.level;

        levelElem.className = "";
        if (data.level === "GOOD") levelElem.classList.add("good");
        else if (data.level === "CAUTION") levelElem.classList.add("caution");
        else if (data.level === "DANGER") levelElem.classList.add("danger");
      }

      setInterval(fetchData, 500);
    </script>
  </body>
</html>
